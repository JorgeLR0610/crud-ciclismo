<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Lista de Puertos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/css/styles.css}" rel="stylesheet">
</head>

<body>

    <div class="container">
        <h1>Puertos</h1>

        <div th:if="${mensaje}" th:class="'alert alert-' + ${tipo} + ' alert-dismissible fade show'" role="alert">
            <span th:text="${mensaje}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <div class="d-flex mb-3 animate-fade-in-up">
            <a th:href="@{/puertos/nuevo}" class="btn btn-primary">Añadir Nuevo Puerto</a>
            <a th:href="@{/}" class="btn btn-outline-secondary ms-auto">Volver al menú principal</a>
        </div>

        <form th:action="@{/puertos}" method="get"
            class="d-flex align-items-center mb-3 p-3 bg-light rounded animate-fade-in-up delay-100">

            <label for="campo" class="form-label me-2 mb-0">Buscar por:</label>

            <select name="campo" id="searchSelect" class="form-select me-2" style="width: 200px;">
                <option value="nombrePuerto" data-col-index="1">Nombre del Puerto</option>
                <option value="idPuerto" data-col-index="0">ID Puerto</option>
                <option value="altura" data-col-index="2">Altura</option>
                <option value="categoria" data-col-index="3">Categoría</option>
            </select>

            <input type="text" name="query" id="searchInput" class="form-control me-2"
                placeholder="Escribe tu búsqueda..." />

            <button type="submit" class="btn btn-secondary me-2">Buscar</button>

            <a th:href="@{/puertos}" class="btn btn-light">Limpiar</a>

        </form>

        <table class="table table-hover animate-fade-in-up delay-200">
            <thead class="table-dark">
                <tr>
                    <th>ID Puerto</th>
                    <th>Nombre del Puerto</th>
                    <th>Altura</th>
                    <th>Categoría</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="puerto : ${listaDePuertos}">
                    <td th:text="${puerto.idPuerto}">1</td>
                    <td th:text="${puerto.nombrePuerto}">Nombre</td>
                    <td th:text="${puerto.altura}">Altura</td>
                    <td th:text="${puerto.categoria}">Categoría</td>
                    <td>
                        <a th:href="@{/puertos/editar/{id}(id=${puerto.idPuerto})}" class="btn btn-warning btn-sm">
                            Editar
                        </a>
                        <form th:action="@{/puertos/eliminar/{id}(id=${puerto.idPuerto})}" method="post"
                            style="display:inline;">
                            <input type="hidden" name="_method" value="DELETE" />
                            <button type="submit" class="btn btn-danger btn-sm"
                                onclick="return confirm('¿Estás seguro de eliminar este puerto?')">
                                Eliminar
                            </button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/scripts.js}"></script>
</body>

</html>